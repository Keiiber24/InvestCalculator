<!DOCTYPE html>
<html lang="en">
<!-- ... [head section remains the same] ... -->

<style>
    .latest-price {
        position: relative;
    }
    
    .latest-price.loading::after {
        content: '';
        position: absolute;
        width: 16px;
        height: 16px;
        right: 8px;
        top: 50%;
        transform: translateY(-50%);
        border: 2px solid var(--bs-warning);
        border-radius: 50%;
        border-top-color: transparent;
        animation: spin 1s linear infinite;
    }
    
    .price-updated {
        animation: flash 1s;
    }
    
    @keyframes spin {
        to { transform: translateY(-50%) rotate(360deg); }
    }
    
    @keyframes flash {
        0% { background-color: transparent; }
        50% { background-color: rgba(241, 196, 15, 0.2); }
        100% { background-color: transparent; }
    }
</style>

<!-- ... [other sections remain the same until trades by market table] ... -->

<!-- Trades by Market -->
<div class="col-12">
    <div class="card shadow-lg border-0">
        <div class="card-header bg-primary">
            <h2 class="card-title h4 mb-0 text-yellow">Trades by Market</h2>
        </div>
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table mb-0" id="trades-by-market-table">
                    <thead>
                        <tr>
                            <th>Market</th>
                            <th>Number of Trades</th>
                            <th>Total Position Value</th>
                            <th>Latest Price</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for market in summary.trades_by_market %}
                        <tr>
                            <td>{{ market.Market|default('N/A') }}</td>
                            <td>{{ market.Count|default(0) }}</td>
                            <td data-format="currency">{{ market.get('Total Position', 0) }}</td>
                            <td class="latest-price" data-format="currency">{{ market.get('Latest Price', 'N/A') }}</td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="4" class="text-center">No market data available</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- ... [rest of the template remains the same] ... -->
</html>
